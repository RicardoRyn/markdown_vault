# 使用流程

## 事先准备

`jj config set --user user.name "Ricardo_T8"` # 设置用户名
`jj config set --user user.email "RicardoRyn1317@gmail.com"` # 设置用户邮箱
`jj config set --user core.editor "nvim"` # 设置默认编辑器
`jj config set --user ui.pager :builtin` # 设置默认pager

如果更改用户或者邮箱，需要以下命令更新
`jj metaedit --update-author`

可选
`jj config set --user git.push-new-bookmarks true` # 推送新的书签无须加`--allow-new`
`jj config set --user ui.pager :builtin`

## 创建仓库

`jj git init` # 初始化代码库
`jj git remote add origin git@github.com:<User name>/<repository name>.git`
`jj git remote list`

`jj git clone git@github.com:<User name>/<repository name>.git <custom repository name>`

## 常规使用

`jj undo`
`jj redo`

`jj git fetch`

`jj log` # 查看change链
`jj log -r ::` # 查看所有change链

`jj commit` # 打开nvim为当前change进行commit，生成并跳转到其新的子分支上
`jj commit -m "<message>"` # 为当前change进行commit，生成并跳转到其新的子分支上

`jj show <change ID>` # 显示change的内容

`jj file untrack submission_alice_bob.tar.gz` # 移除对某个文件的追踪

`jj new <change ID>"` # 在指定的change后创建新的change

`jj new <change ID1> <change ID2> -m "<message>"` # 合并change1和change2成为新的change
`jj rebase --destination <change ID>` # 将当前change rebase到指定change

`jj bookmark create <branch name> --revision <change ID>` # 创建新的书签
`jj bookmark move <existed branch name> --to @-` # 将分支移动到当前change

少用 `jj bookmark set <existed branch name> --revision <change ID>` # 将分支名设置到指定change上
少用 `jj bookmark set <existed branch name> -r <change ID> --allow-backwards` # 将分支名设置到指定change上（甚至可以回退）

`jj git push --bookmark <bookmark name> --allow-new` # 推送新的书签
`jj git push --bookmark <bookmark name> -N` # 推送新的书签
`jj git push`
`jj git push --change <change ID>` # 会自动推送当前change到新的子分支上

### 书签

Jujutsu 中的书签分为：

- 追踪
- 未追踪

若书签被标记为追踪状态，当你运行 `jj git fetch` 时 Jujutsu 会自动保持本地与远程版本同步。
新建书签并推送到远程后，它会自动转为追踪状态——这就是为何我们此前无需关注追踪状态。

**在 clone 仓库后，只有 `main` 书签会自动设为追踪状态。
远程仓库存在的其他书签默认均保持未追踪状态。**
